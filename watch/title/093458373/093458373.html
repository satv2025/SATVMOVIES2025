<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Matias Ponce - La Película - Sol Argentino TV MOVIES</title>
  <link rel="icon" href="https://movies.solargentinotv.com.ar/assets/media/images/SolArgentinoTVMOVIES.ico" type="image/x-icon">

  <!-- Plyr CSS -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
  <link rel="stylesheet" href="https://movies.solargentinotv.com.ar/assets/css/plyr/satvplyr.css">
  <style>
    @import url(https://fuentes.solargentinotv.com.ar/netflixsans.css);

    * {
        font-family: 'Netflix Sans';
    }

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden; /* evita scrollbars */
  background: #181818;
}

.player-wrapper {
  position: fixed; /* se posiciona respecto a la ventana */
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.plyr {
  width: 100%;
  height: 100%;
  border: none;
}

.modal {
  display: none;
  position: fixed;
  top: 72px;
  right: 20px;
  background-color: #222;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  width: 767px;
  max-height: 88vh;
  height: 88vh;
  overflow-y: auto;
  z-index: 2000;
  border-radius: 8px;
}

.modal-header h2 {
    color: #fff;
    padding-left: 2em;
    padding-top: 0.2em;
}


.modal-content {
  background-color: #222;
  border: 1px solid #222;
  width: 100%;
  color: #fff;
  box-sizing: border-box;
  padding-left: 3em;
  padding-right: 3.5em;
  padding-bottom: 1.67em;
  overflow-y: hidden;
  margin-top: -1.3em;
}

.modal ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.modal li {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  border-top: 1px solid #444;
  border-bottom: 1px solid #444;
  cursor: pointer;
  transition: background 0.2s;
  text-align: justify;
  height: 7em; /* altura fija */
  overflow: hidden; /* oculta contenido extra */
  padding-top: 2em;
  padding-bottom: 2em;
}


.modal li:hover {
  background-color: #444;
}

.modal li:first-child {
  border-top: none;
}

.modal li:last-child {
  border-bottom: none;
}

.modal li img {
  width: 149px;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  border-radius: 4px;
  flex-shrink: 0;
}

.episode-info {
  display: flex;
  flex-direction: column;
  justify-content: center;
  width: 100%;
}

.episode-info strong {
  font-size: 1em;
  margin-bottom: 6px;
}

.episode-info p {
  font-size: 0.9em;
  margin: 0;
  color: #ccc;
  line-height: 1.4;
  font-weight: 400;
}

    .close {
      cursor: auto;
      font-size: 20px;
      color: #ffffff00;
    }

    /* Estilo para el botón SVG personalizado */
    .plyr__control.custom-episode-btn svg {
      stroke: #f00;
      width: 20px;
      height: 20px;
    }

    path {
        stroke: #F00;
    }
  </style>
</head>
<body>
<div class="player-wrapper">
  <video id="player" controls crossorigin playsinline></video>

  <!-- Modal de Episodios -->
  <div id="episodeModal" class="modal">
    <div class="modal-header">
      <h2>Episodios</h2>
      <span class="close" onclick="toggleModal()">&times;</span>
    </div>
    <div class="modal-content">
      <ul id="episodeList"></ul>
    </div>
  </div>
</div>

<!-- Plyr JS -->
<script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
<!-- HLS.js -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<script>
  const episodes = [
            {
                title: 'Matias Ponce, La Película',
                description: 'Matías Ponce, creador de contenido en redes, se enfrenta a alienígenas y hackers tras la misteriosa suspensión de su canal de youtube, o como él lo llama "Yutun", desatando una hilarante y absurda aventura.',
                videoPath: 'https://cdn.jsdelivr.net/gh/satv2025/media@main/videos/mpp/mp/MATIAS%20PONCE%20%20LA%20PEL%C3%8DCULA.m3u8',
                image: 'https://movies.solargentinotv.com.ar/assets/media/images/mpthumb.jpg',
                duration: '60 min'
            }
  ];

const player = new Plyr('#player', {
  controls: ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', 'settings', 'fullscreen']
});

const modal = document.getElementById('episodeModal');
const episodeList = document.getElementById('episodeList');
const episodeBtn = document.querySelector('.custom-episode-btn') || (() => {
  const controls = document.querySelector('.plyr__controls');
  const btn = document.createElement('button');
  btn.className = 'plyr__control custom-episode-btn';
  btn.type = 'button';
  btn.setAttribute('aria-label', 'Episodios');
  btn.innerHTML = `<svg viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <g fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" transform="translate(1 4)">
      <path d="m13.5 12.5v-6c0-1.1045695-.8954305-2-2-2h-9c-1.1045695 0-2 .8954305-2 2v6c0 1.1045695.8954305 2 2 2h9c1.1045695 0 2-.8954305 2-2z"/>
      <path d="m15.5 12.5v-6.99481259c0-1.65685425-1.3431458-3-3-3-.0017276 0-.0034553 0-.0051829 0l-8.9948171.01554432"/>
      <path d="m17.5 10.5v-5.99308345c0-2.209139-1.790861-4-4-4-.0023035 0-.004607 0-.0069106 0l-7.9930894.01381519"/>
    </g>
  </svg>`;
  controls.appendChild(btn);
  return btn;
})();

const originalParent = modal.parentElement;

function moveModalToCorrectParent() {
  const plyrFullUI = document.querySelector('.plyr--full-ui');
  if (plyrFullUI) {
    plyrFullUI.appendChild(modal);
  } else {
    originalParent.appendChild(modal);
  }
}

episodeBtn.onmouseenter = () => {
  moveModalToCorrectParent();
  modal.style.display = 'block';
};

modal.onmouseleave = () => {
  modal.style.display = 'none';
};

document.addEventListener('fullscreenchange', () => {
  if (modal.style.display === 'block') {
    moveModalToCorrectParent();
  }
});

// Crear la lista de episodios
episodeList.innerHTML = ''; // Limpia la lista antes de agregar
episodes.forEach((ep) => {
  const li = document.createElement('li');
  li.innerHTML = `
    <img src="${ep.image}" alt="${ep.title}">
    <div class="episode-info">
      <strong>${ep.title}</strong>
      <p>${ep.description}</p>
    </div>
  `;
  li.onclick = () => {
    loadVideo(ep.videoPath, ep.image);
    modal.style.display = 'none';
  };
  episodeList.appendChild(li);
});

function loadVideo(src, poster) {
  const video = document.querySelector('#player');
  if (window.hls) {
    window.hls.destroy();
    window.hls = null;
  }
  if (Hls.isSupported()) {
    const hls = new Hls();
    hls.loadSource(src);
    hls.attachMedia(video);
    window.hls = hls;
  } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src = src;
  } else {
    alert('Tu navegador no soporta este tipo de video.');
  }
  video.poster = poster;
  video.play();
}

loadVideo(episodes[0].videoPath, episodes[0].image);

document.addEventListener('click', (e) => {
  if (!modal.contains(e.target) && !episodeBtn.contains(e.target)) {
    modal.style.display = 'none';
  }
});
</script>
</body>
</html>